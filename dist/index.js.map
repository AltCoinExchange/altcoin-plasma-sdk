{"version":3,"sources":["webpack:///dist/index.js","webpack:///webpack/bootstrap 841e7c8d172f7b16a983","webpack:///external \"altcoin-ethereum-wallet\"","webpack:///./src/main/main.ts","webpack:///./src/main/eth/ethereum-account.ts","webpack:///external \"eth-lib/lib/account\"","webpack:///external \"eth-lib/lib/hash\"","webpack:///external \"web3-utils\"","webpack:///external \"hdkey\"","webpack:///./src/main/services/ulotion.ts","webpack:///./src/main/services/ulotion-helper.ts","webpack:///external \"crypto-browserify\"","webpack:///external \"json-stable-stringify\"","webpack:///external \"signalhub\"","webpack:///external \"webrtc-swarm\"","webpack:///external \"varstruct\"","webpack:///external \"wrtc\"","webpack:///external \"axios\"","webpack:///./src/main/config/main.config.ts"],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","v","op","f","TypeError","_","y","t","label","ops","pop","trys","length","push","g","sent","throw","return","Symbol","iterator","ethereum_account_1","ulotion_1","altcoin_ethereum_wallet_1","main_config_1","altcoin_ethereum_wallet_2","TOKENS","TokenFactory","ERC20","EthEngine","EthereumWallet","generateMnemonic","AugurTokenTestnet","AugurTokenMainnet","LightClient","GCI","options","privKey","ethConfig","ulotion","uLotion","App","eth","authenticate","acc","EthereumAccount","recoverAccount","eng","keystore","login","recoverAccountAndSignMessage","pkey","order","signature","signReceiptTendermint","payload","sender","sellToken","buyToken","sellAmount","buyAmount","nonce","r","messageHash","refreshState","path","state","_a","send","data","deposit","token","amount","tokenContract","approvedResult","GetToken","approve","contractAddress","DepositToken","currentDepositNonce","action","make","buyTokenObj","sellTokenObj","signedOrder","address","getActiveOrders","withdraw","Account","Hash","Web3Utils","HDKey","account","privateKey","recoverAccountFromSeed","seed","hdkey","fromMasterSeed","hdnode","derive","_privateKey","toString","accounts","privateKeyToAccount","pk","fromPrivate","hexValue","hash","hashMessage","signHash","signWithdrawTendermint","signReceipt","ticketNumber","Error","sign","val","asciiToHex","replace","vrs","decodeSignature","message","keccak256s","ulotion_helper_1","axios","nodes","undefined","getGenesisActivePeer","rpcAddr","genesis","ulotionHelper","fetchGenesis","peer","host","tendermintPort","queryResponse","resp","response","height","Number","JSON","parse","Buffer","from","tx","txBytes","Math","floor","random","encode","params","crypto_browserify_1","stableStringify","signalhub","swarm","vstruct","TxStruct","type","VarString","UInt32BE","convertBase64ToBuffers","obj","bufferToBase64Replacer","base64ToBufferReplacer","startsWith","slice","txData","stringify","sw","hub","process","wrtc","on","id","port","destroy","remoteAddress","json","getGCIFromGenesis","createHash","genesisJson","genesis_time","genesisStr","update","digest","deepClone","replacer","newObj","Array","isArray","assign","key","isBuffer","convertedObj","wshost","defaultWallet"],"mappings":"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","file":"dist/index.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"altcoin-ethereum-wallet\");\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ethereum_account_1 = __webpack_require__(2);\nvar ulotion_1 = __webpack_require__(7);\nvar altcoin_ethereum_wallet_1 = __webpack_require__(0);\nvar main_config_1 = __webpack_require__(16);\n// Export wallet\nvar altcoin_ethereum_wallet_2 = __webpack_require__(0);\nexports.TOKENS = altcoin_ethereum_wallet_2.TOKENS;\nexports.TokenFactory = altcoin_ethereum_wallet_2.TokenFactory;\nexports.ERC20 = altcoin_ethereum_wallet_2.ERC20;\nexports.EthEngine = altcoin_ethereum_wallet_2.EthEngine;\nexports.EthereumWallet = altcoin_ethereum_wallet_2.EthereumWallet;\nexports.generateMnemonic = altcoin_ethereum_wallet_2.generateMnemonic;\nexports.AugurTokenTestnet = altcoin_ethereum_wallet_2.AugurTokenTestnet;\nexports.AugurTokenMainnet = altcoin_ethereum_wallet_2.AugurTokenMainnet;\nvar LightClient = /** @class */ (function () {\n    function LightClient(GCI, options, privKey, ethConfig) {\n        this.GCI = GCI;\n        this.options = options;\n        this.privKey = privKey;\n        this.ethConfig = ethConfig;\n        this.ulotion = new ulotion_1.uLotion(this.GCI, this.options);\n        if (!ethConfig) {\n            this.ethConfig = main_config_1.App.eth;\n        }\n    }\n    /**\n     * Authenticate user\n     * @param {string} privKey\n     */\n    LightClient.prototype.authenticate = function (privKey) {\n        this.privKey = privKey;\n        this.acc = ethereum_account_1.EthereumAccount.recoverAccount(privKey);\n        this.eng = new altcoin_ethereum_wallet_1.EthEngine(null, this.ethConfig, null);\n        this.keystore = this.eng.recoverAccount(this.privKey);\n        this.eng.login(this.keystore);\n    };\n    /**\n     * Recover account and sign message\n     * @param pkey\n     * @param order\n     * @returns {any}\n     */\n    LightClient.prototype.recoverAccountAndSignMessage = function (pkey, order) {\n        var acc = ethereum_account_1.EthereumAccount.recoverAccount(pkey);\n        var signature = acc.signReceiptTendermint(order.payload.sender, order.payload.sellToken, order.payload.buyToken, order.payload.sellAmount, order.payload.buyAmount, order.payload.nonce);\n        order.payload[\"v\"] = signature.v;\n        order.payload[\"r\"] = signature.r;\n        order.payload[\"s\"] = signature.s;\n        order.payload[\"signature\"] = signature.signature;\n        order.payload[\"messageHash\"] = signature.messageHash;\n        return order;\n    };\n    /**\n     * Get lastest state from node\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.refreshState = function (path) {\n        if (path === void 0) { path = ''; }\n        return __awaiter(this, void 0, void 0, function () {\n            var state;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.ulotion.state(path)];\n                    case 1:\n                        state = _a.sent();\n                        return [2 /*return*/, state];\n                }\n            });\n        });\n    };\n    /**\n     * Send transaction to node\n     * @param data\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.send = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.ulotion.send(data)];\n                    case 1:\n                        result = _a.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    /**\n     * Deposit token\n     * @param {TOKENS} token\n     * @param {number} amount\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.deposit = function (token, amount) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenContract, approvedResult, result, nonce;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.authenticate(this.privKey);\n                        tokenContract = altcoin_ethereum_wallet_1.TokenFactory.GetToken(token, this.eng);\n                        return [4 /*yield*/, tokenContract.approve(this.ethConfig.contractAddress, amount)];\n                    case 1:\n                        approvedResult = _a.sent();\n                        return [4 /*yield*/, tokenContract.DepositToken(amount)];\n                    case 2:\n                        result = _a.sent();\n                        return [4 /*yield*/, tokenContract.currentDepositNonce()];\n                    case 3:\n                        nonce = _a.sent();\n                        return [4 /*yield*/, this.send({ action: \"deposit\", payload: { nonce: nonce } })];\n                    case 4: \n                    // Notify side chain about it\n                    // TODO: Fix getting the nonce\n                    return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    /**\n     * Make order\n     * @param {TOKENS} sellToken\n     * @param {TOKENS} buyToken\n     * @param {number} sellAmount\n     * @param {number} buyAmount\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.make = function (sellToken, buyToken, sellAmount, buyAmount) {\n        return __awaiter(this, void 0, void 0, function () {\n            var buyTokenObj, sellTokenObj, order, signedOrder;\n            return __generator(this, function (_a) {\n                buyTokenObj = altcoin_ethereum_wallet_1.TokenFactory.GetToken(buyToken, this.eng);\n                sellTokenObj = altcoin_ethereum_wallet_1.TokenFactory.GetToken(sellToken, this.eng);\n                order = {\n                    \"action\": \"make\",\n                    \"payload\": {\n                        \"sellToken\": sellTokenObj.contractAddress,\n                        \"buyToken\": buyTokenObj.contractAddress,\n                        \"sellAmount\": sellAmount,\n                        \"buyAmount\": buyAmount,\n                        \"nonce\": \"1\",\n                        \"sender\": this.acc.address,\n                    }\n                };\n                signedOrder = this.recoverAccountAndSignMessage(this.privKey, order);\n                return [2 /*return*/, this.send(signedOrder)];\n            });\n        });\n    };\n    /**\n     * Get active orders for this account\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.getActiveOrders = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.refreshState(\"accounts[\" + this.acc.address + \"]\")];\n                    case 1:\n                        result = _a.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    /**\n     * Withdraw\n     * @param {WithdrawDto} data\n     * @returns {Promise<any>}\n     */\n    LightClient.prototype.withdraw = function (data) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/];\n            });\n        });\n    };\n    return LightClient;\n}());\nexports.LightClient = LightClient;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Account = __webpack_require__(3);\nvar Hash = __webpack_require__(4);\nvar Web3Utils = __webpack_require__(5);\nvar HDKey = __webpack_require__(6);\nvar EthereumAccount = /** @class */ (function () {\n    function EthereumAccount(account) {\n        this.account = account;\n    }\n    Object.defineProperty(EthereumAccount.prototype, \"privateKey\", {\n        get: function () {\n            return this.account.privateKey;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EthereumAccount.prototype, \"address\", {\n        get: function () {\n            return this.account.address;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EthereumAccount.recoverAccountFromSeed = function (seed) {\n        var hdkey = new HDKey.fromMasterSeed(seed);\n        var hdnode = hdkey.derive(\"m/44'/60'/0'/0/0\");\n        var privateKey = hdnode._privateKey.toString(\"hex\");\n        var accounts = Account.accounts;\n        var acc = accounts.privateKeyToAccount(\"0x\" + privateKey);\n        return acc;\n    };\n    EthereumAccount.recoverAccount = function (pk) {\n        return new EthereumAccount(Account.fromPrivate(pk));\n    };\n    EthereumAccount.prototype.signReceiptTendermint = function (sender, sellToken, buyToken, sellAmount, buyAmount, nonce) {\n        var data = sender + sellToken + buyToken + this.hexValue(sellAmount) + this.hexValue(buyAmount) + this.hexValue(nonce);\n        var hash = this.hashMessage(data);\n        return this.signHash(data, hash);\n    };\n    EthereumAccount.prototype.signWithdrawTendermint = function (sender, token, amount) {\n        var data = sender + token + this.hexValue(amount);\n        var hash = this.hashMessage(data);\n        return this.signHash(data, hash);\n    };\n    EthereumAccount.prototype.signReceipt = function (contractAddress, value, ticketNumber) {\n        if (typeof value !== \"string\") {\n            throw new Error(\"value must be string\");\n        }\n        var data = contractAddress + this.hexValue(value) + this.hexValue(ticketNumber);\n        return this.sign(data);\n    };\n    EthereumAccount.prototype.hexValue = function (val) {\n        return Web3Utils.asciiToHex(val).replace(\"0x\", \"\");\n    };\n    EthereumAccount.prototype.signHash = function (data, hash) {\n        var signature = Account.sign(hash, this.privateKey);\n        var vrs = Account.decodeSignature(signature);\n        return {\n            message: data,\n            messageHash: hash,\n            v: vrs[0],\n            r: vrs[1],\n            s: vrs[2],\n            signature: signature\n        };\n    };\n    ;\n    EthereumAccount.prototype.sign = function (data) {\n        var hash = this.hashMessage(data);\n        var signature = Account.sign(hash, this.privateKey);\n        var vrs = Account.decodeSignature(signature);\n        return {\n            message: data,\n            messageHash: hash,\n            v: vrs[0],\n            r: vrs[1],\n            s: vrs[2],\n            signature: signature\n        };\n    };\n    ;\n    EthereumAccount.prototype.hashMessage = function (data) {\n        return Hash.keccak256s(data);\n    };\n    ;\n    return EthereumAccount;\n}());\nexports.EthereumAccount = EthereumAccount;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"eth-lib/lib/account\");\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"eth-lib/lib/hash\");\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"web3-utils\");\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"hdkey\");\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ulotion_helper_1 = __webpack_require__(8);\nvar axios = __webpack_require__(15);\nvar uLotion = /** @class */ (function () {\n    function uLotion(GCI, options) {\n        this.GCI = GCI;\n        this.options = options;\n        this.nodes = [];\n        this.nodes = options.nodes;\n        if (!GCI) {\n            if (this.nodes === undefined || this.nodes.length === 0) {\n                throw Error('Nodes not set');\n            }\n        }\n    }\n    /**\n     * Get genesis active peer\n     * @returns {Promise<string>}\n     */\n    uLotion.prototype.getGenesisActivePeer = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var rpcAddr, genesis;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.GCI) return [3 /*break*/, 2];\n                        return [4 /*yield*/, ulotion_helper_1.ulotionHelper.fetchGenesis(this.GCI)];\n                    case 1:\n                        genesis = _a.sent();\n                        rpcAddr = \"http://\" + genesis.peer.host + \":\" + this.options.tendermintPort;\n                        return [3 /*break*/, 3];\n                    case 2:\n                        rpcAddr = this.nodes[0]; //.replace('http:', 'ws:');\n                        _a.label = 3;\n                    case 3: return [2 /*return*/, rpcAddr];\n                }\n            });\n        });\n    };\n    /**\n     * Get state from tendermint client\n     * @param {string} path\n     * @returns {Promise<any>}\n     */\n    uLotion.prototype.state = function (path) {\n        if (path === void 0) { path = ''; }\n        return __awaiter(this, void 0, void 0, function () {\n            var rpcAddr, queryResponse, resp, value;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getGenesisActivePeer()];\n                    case 1:\n                        rpcAddr = _a.sent();\n                        return [4 /*yield*/, axios.get(rpcAddr + \"/abci_query?path=\\\"\" + path + \"\\\"\")];\n                    case 2:\n                        queryResponse = _a.sent();\n                        resp = queryResponse.data.result.response;\n                        resp.height = Number(resp.height);\n                        value = null;\n                        try {\n                            value = JSON.parse(Buffer.from(resp.value, 'base64').toString());\n                        }\n                        catch (e) {\n                            throw new Error('invalid json in query response');\n                        }\n                        return [2 /*return*/, value];\n                }\n            });\n        });\n    };\n    /**\n     * Send transaction\n     * @param tx\n     * @returns {Promise<any>}\n     */\n    uLotion.prototype.send = function (tx) {\n        return __awaiter(this, void 0, void 0, function () {\n            var rpcAddr, nonce, txBytes, result;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getGenesisActivePeer()];\n                    case 1:\n                        rpcAddr = _a.sent();\n                        nonce = Math.floor(Math.random() * (2 << 12));\n                        txBytes = '0x' + ulotion_helper_1.ulotionHelper.encode(tx, nonce).toString('hex');\n                        return [4 /*yield*/, axios.get(rpcAddr.replace('ws:', 'http:') + \"/broadcast_tx_commit\", {\n                                params: {\n                                    tx: txBytes\n                                }\n                            })];\n                    case 2:\n                        result = _a.sent();\n                        return [2 /*return*/, result.data.result];\n                }\n            });\n        });\n    };\n    return uLotion;\n}());\nexports.uLotion = uLotion;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar crypto_browserify_1 = __webpack_require__(9);\nvar stableStringify = __webpack_require__(10);\n// const IPFS = require('ipfs');\n// const OrbitDB = require('orbit-db');\n// const discoveryChannel = require('discovery-channel');\n// const net = require('net');\n// const defaults = require('dat-swarm-defaults')();\nvar signalhub = __webpack_require__(11);\nvar swarm = __webpack_require__(12);\nvar vstruct = __webpack_require__(13);\nvar TxStruct = vstruct([\n    { name: 'data', type: vstruct.VarString(vstruct.UInt32BE) },\n    { name: 'nonce', type: vstruct.UInt32BE },\n]);\nvar base64Prefix = ':base64:';\nvar ulotionHelper = /** @class */ (function () {\n    function ulotionHelper() {\n    }\n    ulotionHelper.convertBase64ToBuffers = function (obj) {\n        return ulotionHelper.replace(obj, ulotionHelper.bufferToBase64Replacer);\n    };\n    ulotionHelper.base64ToBufferReplacer = function (value) {\n        if (typeof value !== 'string')\n            return value;\n        if (!value.startsWith(base64Prefix))\n            return value;\n        return Buffer.from(value.slice(base64Prefix.length), 'base64');\n    };\n    /**\n     * Encode transaction\n     * @param txData\n     * @param nonce\n     * @returns {any}\n     */\n    ulotionHelper.encode = function (txData, nonce) {\n        var data = ulotionHelper.stringify(txData);\n        var bytes = TxStruct.encode({ nonce: nonce, data: data });\n        return bytes;\n    };\n    ulotionHelper.fetchGenesis = function (GCI) {\n        return new Promise(function (resolve, reject) {\n            var hub = signalhub(GCI, ['https://swap.altcoin.io:9091']);\n            var sw;\n            // Check for environment\n            if (typeof process === 'object' && process + '' === '[object process]') {\n                sw = swarm(hub, { wrtc: __webpack_require__(14) });\n            }\n            else {\n                sw = swarm(hub, {});\n            }\n            sw.on('peer', function (peer, id) {\n                peer.on('data', function (data) {\n                    // full node writing to tell me what port to use for their tendermint rpc server\n                    var port = Number(data.toString());\n                    if (port > 100 && port < 65536) {\n                        peer.destroy();\n                        resolve({ peer: { host: peer.remoteAddress, port: port } });\n                    }\n                });\n            });\n        });\n    };\n    /**\n     * Parse string\n     * @param json\n     */\n    ulotionHelper.parse = function (json) {\n        var obj = JSON.parse(json);\n        return ulotionHelper.convertBase64ToBuffers(obj);\n    };\n    /**\n     * Get hash data from genesis\n     * @param genesis\n     */\n    ulotionHelper.getGCIFromGenesis = function (genesis) {\n        var hash = crypto_browserify_1.createHash('sha256');\n        // TODO: Check for genesisTime if needs to be hashed to get correct GCI\n        var genesisJson = ulotionHelper.parse(genesis);\n        genesisJson.genesis_time = \"\";\n        var genesisStr = ulotionHelper.stringify(genesisJson);\n        return hash.update(genesisStr, 'utf8').digest().toString('hex');\n    };\n    /**\n     * Clones an object\n     * @param obj\n     * @param replacer\n     * @returns {{}}\n     */\n    ulotionHelper.deepClone = function (obj, replacer) {\n        var newObj = Array.isArray(obj) ? [] : {};\n        Object.assign(newObj, obj);\n        for (var key in newObj) {\n            newObj[key] = replacer(newObj[key]);\n            if (typeof newObj[key] === 'object') {\n                newObj[key] = this.deepClone(newObj[key], replacer);\n            }\n        }\n        return newObj;\n    };\n    /**\n     * Replaces values in an object without cloning\n     * @param obj\n     * @param replacer\n     * @returns {any}\n     */\n    ulotionHelper.replace = function (obj, replacer) {\n        for (var key in obj) {\n            obj[key] = replacer(obj[key]);\n            if (typeof obj[key] === 'object' && !Buffer.isBuffer(obj[key])) {\n                // recursively replace props of objects (unless it's a Buffer)\n                ulotionHelper.replace(obj[key], replacer);\n            }\n        }\n        return obj;\n    };\n    /**\n     * Stringify obj\n     * @param obj\n     * @returns {any}\n     */\n    ulotionHelper.stringify = function (obj) {\n        var convertedObj = ulotionHelper.deepClone(obj, ulotionHelper.bufferToBase64Replacer);\n        return stableStringify(convertedObj);\n    };\n    /**\n     * Replace buffer to base64\n     * @param value\n     * @returns {any}\n     */\n    ulotionHelper.bufferToBase64Replacer = function (value) {\n        if (typeof value === 'object' &&\n            value != null &&\n            value.type === 'Buffer' &&\n            Array.isArray(value.data)) {\n            value = Buffer.from(value);\n        }\n        if (!Buffer.isBuffer(value))\n            return value;\n        return \"\" + base64Prefix + value.toString('base64');\n    };\n    return ulotionHelper;\n}());\nexports.ulotionHelper = ulotionHelper;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"crypto-browserify\");\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"json-stable-stringify\");\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"signalhub\");\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"webrtc-swarm\");\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"varstruct\");\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"wrtc\");\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\nmodule.exports = require(\"axios\");\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.App = {\n    eth: {\n        wshost: \"wss://swap.altcoin.io:8550\",\n        contractAddress: \"0x5f450aa5c15664bd88f31e63d0c40961ff129042\",\n        defaultWallet: \"0xb483f5a8c6ebA74Dc1bcef9D167E6B86Caa4C773\",\n    }\n};\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 841e7c8d172f7b16a983","module.exports = require(\"altcoin-ethereum-wallet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"altcoin-ethereum-wallet\"\n// module id = 0\n// module chunks = 0","import {DepositDto} from \"./dto/deposit.dto\";\nimport {WithdrawDto} from \"./dto/withdraw.dto\";\nimport {OrderDto} from \"./dto/order.dto\";\nimport {EthereumAccount} from \"./eth/ethereum-account\";\nimport {uLotion} from \"./services/ulotion\";\nimport {EthEngine, TokenFactory, TOKENS} from \"altcoin-ethereum-wallet\";\nimport {App} from \"./config/main.config\";\nimport {AugurTokenTestnet} from \"altcoin-ethereum-wallet/dist/src/eth-tokens/augur\";\n\n// Export wallet\nexport {\n  TOKENS,\n  TokenFactory,\n  ERC20,\n  EthEngine,\n  EthereumWallet,\n  generateMnemonic,\n  AugurTokenTestnet,\n  AugurTokenMainnet} from \"altcoin-ethereum-wallet\";\n\nexport class LightClient {\n\n  private state: any;\n  private acc: EthereumAccount;\n  private eng: EthEngine;\n  private ulotion: uLotion;\n  private keystore: any;\n\n  constructor(private GCI: string, private options, private privKey, private ethConfig?) {\n    this.ulotion = new uLotion(this.GCI, this.options);\n    if (!ethConfig) {\n      this.ethConfig = App.eth;\n    }\n  }\n\n  /**\n   * Authenticate user\n   * @param {string} privKey\n   */\n  public authenticate(privKey: string) {\n    this.privKey = privKey;\n    this.acc = EthereumAccount.recoverAccount(privKey);\n    this.eng = new EthEngine(null, this.ethConfig, null);\n    this.keystore = this.eng.recoverAccount(this.privKey);\n    this.eng.login(this.keystore);\n  }\n\n  /**\n   * Recover account and sign message\n   * @param pkey\n   * @param order\n   * @returns {any}\n   */\n  public recoverAccountAndSignMessage(pkey, order) {\n    let acc = EthereumAccount.recoverAccount(pkey);\n    const signature = acc.signReceiptTendermint(order.payload.sender,\n      order.payload.sellToken,\n      order.payload.buyToken,\n      order.payload.sellAmount, order.payload.buyAmount, order.payload.nonce);\n\n    order.payload[\"v\"] = signature.v;\n    order.payload[\"r\"] = signature.r;\n    order.payload[\"s\"] = signature.s;\n    order.payload[\"signature\"] = signature.signature;\n    order.payload[\"messageHash\"] = signature.messageHash;\n\n    return order;\n  }\n\n  /**\n   * Get lastest state from node\n   * @returns {Promise<any>}\n   */\n  public async refreshState(path: string = '') {\n    const state = await this.ulotion.state(path);\n    return state;\n  }\n\n  /**\n   * Send transaction to node\n   * @param data\n   * @returns {Promise<any>}\n   */\n  private async send(data: any) {\n    const result = await this.ulotion.send(data);\n    return result;\n  }\n\n  /**\n   * Deposit token\n   * @param {TOKENS} token\n   * @param {number} amount\n   * @returns {Promise<any>}\n   */\n  public async deposit(token: TOKENS, amount: number) {\n\n    this.authenticate(this.privKey);\n\n    // Get token\n    const tokenContract = TokenFactory.GetToken(token, this.eng);\n\n    // TODO: More checks\n    // Approve token for spender\n    const approvedResult = await tokenContract.approve(this.ethConfig.contractAddress, amount);\n\n    // Deposit token to contract\n    const result = await tokenContract.DepositToken(amount);\n\n    // Deposit token to contract\n    const nonce = await tokenContract.currentDepositNonce();\n\n    // Notify side chain about it\n    // TODO: Fix getting the nonce\n    return await this.send({ action: \"deposit\", payload: {nonce: nonce} });\n  }\n\n  /**\n   * Make order\n   * @param {TOKENS} sellToken\n   * @param {TOKENS} buyToken\n   * @param {number} sellAmount\n   * @param {number} buyAmount\n   * @returns {Promise<any>}\n   */\n  public async make(sellToken: TOKENS, buyToken: TOKENS, sellAmount: number, buyAmount: number) {\n\n    // Get token\n    const buyTokenObj = TokenFactory.GetToken(buyToken, this.eng);\n    const sellTokenObj = TokenFactory.GetToken(sellToken, this.eng);\n\n    const order = {\n      \"action\" : \"make\",\n      \"payload\" : {\n        \"sellToken\": sellTokenObj.contractAddress,\n        \"buyToken\": buyTokenObj.contractAddress,\n        \"sellAmount\": sellAmount,\n        \"buyAmount\": buyAmount,\n        \"nonce\": \"1\", // TODO: Get latest nonce from state\n        \"sender\": this.acc.address,\n      }};\n\n    const signedOrder = this.recoverAccountAndSignMessage(this.privKey, order);\n\n    return this.send(signedOrder);\n  }\n\n  /**\n   * Get active orders for this account\n   * @returns {Promise<any>}\n   */\n  public async getActiveOrders() {\n    const result = await this.refreshState(`accounts[${this.acc.address}]`);\n    return result;\n  }\n\n  /**\n   * Withdraw\n   * @param {WithdrawDto} data\n   * @returns {Promise<any>}\n   */\n  public async withdraw(data: WithdrawDto) {\n    // TODO: add contract call\n    //return this.send(data);\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/main/main.ts","import * as Account from \"eth-lib/lib/account\";\nimport * as Hash from \"eth-lib/lib/hash\";\nimport * as Web3Utils from \"web3-utils\";\nimport { DepositDto } from '../dto/deposit.dto';\nimport * as HDKey from \"hdkey\";\n\nexport interface RawAccount {\n  privateKey: string;\n  address: string;\n}\n\nexport class EthereumAccount {\n\n  constructor(private account: RawAccount) {\n  }\n\n  get privateKey() {\n    return this.account.privateKey;\n  }\n\n  get address() {\n    return this.account.address;\n  }\n\n  static recoverAccountFromSeed(seed: string): EthereumAccount {\n    const hdkey = new HDKey.fromMasterSeed(seed);\n    const hdnode = hdkey.derive(\"m/44'/60'/0'/0/0\");\n    const privateKey = hdnode._privateKey.toString(\"hex\");\n\n    const accounts = Account.accounts;\n    const acc = accounts.privateKeyToAccount(\"0x\" + privateKey);\n    return acc;\n  }\n\n  static recoverAccount(pk: string): EthereumAccount {\n    return new EthereumAccount(Account.fromPrivate(pk));\n  }\n\n  signReceiptTendermint(sender, sellToken, buyToken, sellAmount, buyAmount, nonce) {\n    const data = sender + sellToken + buyToken + this.hexValue(sellAmount) + this.hexValue(buyAmount) + this.hexValue(nonce);\n    const hash = this.hashMessage(data);\n    return this.signHash(data, hash);\n  }\n\n  signWithdrawTendermint(sender, token, amount) {\n    const data = sender + token + this.hexValue(amount);\n    const hash = this.hashMessage(data);\n    return this.signHash(data, hash);\n  }\n\n  signReceipt(contractAddress, value, ticketNumber) {\n    if (typeof value !== \"string\") {\n      throw new Error(\"value must be string\");\n    }\n\n    const data = contractAddress + this.hexValue(value) + this.hexValue(ticketNumber);\n    return this.sign(data);\n  }\n\n  hexValue(val) {\n    return Web3Utils.asciiToHex(val).replace(\"0x\", \"\");\n  }\n\n  signHash(data, hash) {\n    const signature = Account.sign(hash, this.privateKey);\n    const vrs = Account.decodeSignature(signature);\n\n    return {\n      message: data,\n      messageHash: hash,\n      v: vrs[0],\n      r: vrs[1],\n      s: vrs[2],\n      signature: signature\n    };\n  };\n\n  sign(data) {\n    const hash = this.hashMessage(data);\n\n    const signature = Account.sign(hash, this.privateKey);\n    const vrs = Account.decodeSignature(signature);\n\n    return {\n      message: data,\n      messageHash: hash,\n      v: vrs[0],\n      r: vrs[1],\n      s: vrs[2],\n      signature: signature\n    };\n  };\n\n  public hashMessage(data: string) {\n    return Hash.keccak256s(data);\n  };\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/main/eth/ethereum-account.ts","module.exports = require(\"eth-lib/lib/account\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eth-lib/lib/account\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"eth-lib/lib/hash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"eth-lib/lib/hash\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"web3-utils\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"web3-utils\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"hdkey\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"hdkey\"\n// module id = 6\n// module chunks = 0","import {ulotionHelper} from \"./ulotion-helper\";\nlet axios = require('axios');\n\nexport class uLotion {\n\n  private nodes = [];\n\n  constructor(private GCI, private options) {\n    this.nodes = options.nodes;\n    if (!GCI) {\n      if (this.nodes === undefined || this.nodes.length === 0) {\n        throw Error('Nodes not set');\n      }\n    }\n  }\n\n  /**\n   * Get genesis active peer\n   * @returns {Promise<string>}\n   */\n  public async getGenesisActivePeer(): Promise<string> {\n    let rpcAddr;\n    if (this.GCI) {\n      // rpcAddr = this.nodes[0];\n      const genesis = await ulotionHelper.fetchGenesis(this.GCI);\n      rpcAddr = `http://${genesis.peer.host}:${this.options.tendermintPort}`;\n    } else {\n      rpcAddr = this.nodes[0]; //.replace('http:', 'ws:');\n    }\n    return rpcAddr;\n  }\n\n  /**\n   * Get state from tendermint client\n   * @param {string} path\n   * @returns {Promise<any>}\n   */\n  public async state(path = '') {\n\n    const rpcAddr = await this.getGenesisActivePeer();\n    const queryResponse = await axios.get(`${rpcAddr}/abci_query?path=\"${path}\"`);\n\n    let resp = queryResponse.data.result.response;\n    resp.height = Number(resp.height);\n\n    let value = null;\n    try {\n      value = JSON.parse(Buffer.from(resp.value, 'base64').toString());\n    } catch (e) {\n      throw new Error('invalid json in query response')\n    }\n\n    return value;\n  }\n\n  /**\n   * Send transaction\n   * @param tx\n   * @returns {Promise<any>}\n   */\n  public async send(tx) {\n\n      const rpcAddr = await this.getGenesisActivePeer();\n      let nonce = Math.floor(Math.random() * (2 << 12));\n      let txBytes = '0x' + ulotionHelper.encode(tx, nonce).toString('hex');\n\n      const result = await axios.get(`${rpcAddr.replace(\n            'ws:',\n            'http:'\n          )}/broadcast_tx_commit`,\n          {\n            params: {\n              tx: txBytes\n            }\n          }\n        );\n\n      return result.data.result;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/main/services/ulotion.ts","import { createHash } from \"crypto-browserify\";\nconst stableStringify = require('json-stable-stringify');\n// const IPFS = require('ipfs');\n// const OrbitDB = require('orbit-db');\n// const discoveryChannel = require('discovery-channel');\n// const net = require('net');\n// const defaults = require('dat-swarm-defaults')();\nconst signalhub = require('signalhub');\nconst swarm = require('webrtc-swarm')\nconst vstruct = require('varstruct');\n\nlet TxStruct = vstruct([\n  { name: 'data', type: vstruct.VarString(vstruct.UInt32BE) },\n  { name: 'nonce', type: vstruct.UInt32BE },\n]);\n\nconst base64Prefix = ':base64:';\n\nexport class ulotionHelper {\n\n  private static convertBase64ToBuffers(obj) {\n    return ulotionHelper.replace(obj, ulotionHelper.bufferToBase64Replacer);\n  }\n\n  private static base64ToBufferReplacer(value) {\n    if (typeof value !== 'string') return value;\n    if (!value.startsWith(base64Prefix)) return value;\n    return Buffer.from(value.slice(base64Prefix.length), 'base64');\n  }\n\n  /**\n   * Encode transaction\n   * @param txData\n   * @param nonce\n   * @returns {any}\n   */\n  public static encode(txData, nonce) {\n    let data = ulotionHelper.stringify(txData);\n    let bytes = TxStruct.encode({ nonce, data });\n    return bytes;\n  }\n\n  public static fetchGenesis(GCI): Promise<any> {\n    return new Promise((resolve, reject) => {\n      let hub = signalhub(GCI, ['https://swap.altcoin.io:9091']);\n      let sw;\n\n      // Check for environment\n      if (typeof process === 'object' && process + '' === '[object process]') {\n        sw = swarm(hub, { wrtc: require('wrtc') });\n      }\n      else{\n        sw = swarm(hub, {});\n      }\n\n      sw.on('peer', function(peer, id) {\n        peer.on('data', function(data) {\n          // full node writing to tell me what port to use for their tendermint rpc server\n          let port = Number(data.toString());\n          if (port > 100 && port < 65536) {\n            peer.destroy();\n            resolve({peer: { host: peer.remoteAddress, port: port}});\n          }\n        })\n      })\n    })\n  }\n\n  /**\n   * Parse string\n   * @param json\n   */\n  private static parse(json) {\n    let obj = JSON.parse(json);\n    return ulotionHelper.convertBase64ToBuffers(obj);\n  }\n\n  /**\n   * Get hash data from genesis\n   * @param genesis\n   */\n  private static getGCIFromGenesis(genesis) {\n    let hash = createHash('sha256');\n    // TODO: Check for genesisTime if needs to be hashed to get correct GCI\n    let genesisJson: any = ulotionHelper.parse(genesis);\n    genesisJson.genesis_time = \"\";\n    let genesisStr = ulotionHelper.stringify(genesisJson);\n    return hash.update(genesisStr, 'utf8').digest().toString('hex')\n  }\n\n  /**\n   * Clones an object\n   * @param obj\n   * @param replacer\n   * @returns {{}}\n   */\n  private static deepClone(obj, replacer) {\n    let newObj = Array.isArray(obj) ? [] : {};\n    Object.assign(newObj, obj);\n    for (let key in newObj) {\n      newObj[key] = replacer(newObj[key]);\n      if (typeof newObj[key] === 'object') {\n        newObj[key] = this.deepClone(newObj[key], replacer);\n      }\n    }\n    return newObj;\n  }\n\n  /**\n   * Replaces values in an object without cloning\n   * @param obj\n   * @param replacer\n   * @returns {any}\n   */\n  private static replace(obj, replacer) {\n    for (let key in obj) {\n      obj[key] = replacer(obj[key])\n      if (typeof obj[key] === 'object' && !Buffer.isBuffer(obj[key])) {\n        // recursively replace props of objects (unless it's a Buffer)\n        ulotionHelper.replace(obj[key], replacer)\n      }\n    }\n    return obj\n  }\n\n\n  /**\n   * Stringify obj\n   * @param obj\n   * @returns {any}\n   */\n  private static stringify(obj) {\n    let convertedObj = ulotionHelper.deepClone(obj, ulotionHelper.bufferToBase64Replacer);\n    return stableStringify(convertedObj)\n  }\n\n  /**\n   * Replace buffer to base64\n   * @param value\n   * @returns {any}\n   */\n  private static bufferToBase64Replacer(value) {\n    if (\n      typeof value === 'object' &&\n      value != null &&\n      value.type === 'Buffer' &&\n      Array.isArray(value.data)\n    ) {\n      value = Buffer.from(value)\n    }\n    if (!Buffer.isBuffer(value)) return value;\n    return `${base64Prefix}${value.toString('base64')}`\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/main/services/ulotion-helper.ts","module.exports = require(\"crypto-browserify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto-browserify\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"json-stable-stringify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"json-stable-stringify\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"signalhub\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"signalhub\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"webrtc-swarm\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webrtc-swarm\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"varstruct\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"varstruct\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"wrtc\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"wrtc\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 15\n// module chunks = 0","export const App = {\n  eth: {\n    wshost: \"wss://swap.altcoin.io:8550\",\n    contractAddress: \"0x5f450aa5c15664bd88f31e63d0c40961ff129042\",\n    defaultWallet: \"0xb483f5a8c6ebA74Dc1bcef9D167E6B86Caa4C773\",\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/main/config/main.config.ts"],"sourceRoot":""}